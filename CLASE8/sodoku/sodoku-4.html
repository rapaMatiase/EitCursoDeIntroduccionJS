<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        *{
            margin: 0;
            padding: 0;
        }

        html, body{
            height: 100%;
            width: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
        }


        article{
            display: grid;
            grid-template: 1fr 1fr 1fr / 1fr 1fr 1fr;
            height: 50vh;
            width: 50vh;
        }

        section{
            border: 2px solid black;
        }

        
    </style>
</head>

<body>
    <!-- PASO 9 1/2 - Creo atributos acorde a la posicon que ocupa cada section en el sodoku -->
    <article id="sodoku">
        <section data-i="0" data-j="0"></section>
        <section data-i="0" data-j="1"></section>
        <section data-i="0" data-j="2"></section>
        <section data-i="1" data-j="0"></section>
        <section data-i="1" data-j="1"></section>
        <section data-i="1" data-j="2"></section>
        <section data-i="2" data-j="0"></section>
        <section data-i="2" data-j="1"></section>
        <section data-i="2" data-j="2"></section>
    </article>

    <script>
        let sodokuMatrix = [
            [0, 0, 0],
            [0, 0, 0],
            [0, 0, 0]
        ]

        
        function add(i, j) {
            if (sodokuMatrix[i][j] == 3) {
                sodokuMatrix[i][j] = 1
            } else {
                sodokuMatrix[i][j]++
            }
            
            if(!existeRepetidosEnColumna() && !existeRepetidosEnFila() && !existePosicionesVacias()){
                console.log("Juego terminado")
            }
            console.table(sodokuMatrix)

        }

        function existePosicionesVacias(){
            let bandera = false
            for (let i = 0; i < sodokuMatrix.length; i++) {
                for (let j = 0; j < sodokuMatrix[i].length; j++) {
                    if(sodokuMatrix[i][j] == 0){
                        bandera = true
                    }                    
                }
            }
            return bandera
        }
        function existeRepetidosEnFila() {
            let bandera = false
            for (let i = 0; i < sodokuMatrix.length; i++) {
                if ((sodokuMatrix[i][0] == sodokuMatrix[i][1] || sodokuMatrix[i][0] == sodokuMatrix[i][2] || sodokuMatrix[i][1] == sodokuMatrix[i][2]) && (sodokuMatrix[i][0] != 0 && sodokuMatrix[i][1] != 0 && sodokuMatrix[i][2] != 0)) {
                    bandera = true
                }
            }
            return bandera
        }

        function existeRepetidosEnColumna() {
            let bandera = false
            for (let j = 0; j < sodokuMatrix.length; j++) {
                if ((sodokuMatrix[0][j] == sodokuMatrix[1][j] || sodokuMatrix[0][j] == sodokuMatrix[2][j] || sodokuMatrix[1][j] == sodokuMatrix[2][j]) && (sodokuMatrix[0][j] != 0 && sodokuMatrix[1][j] != 0 && sodokuMatrix[0][j] != 0)){
                    bandera = true
                }
            }
            return bandera
        }

    /* 
    PASO 7
    Crear un selector que obtenga todos los section que hacen de casilla de sodoku en el html. 2min 11.56AM
    */
    let elCasillas = document.querySelectorAll("#sodoku section")
    console.log(elCasillas)

    /* 
    PASO 8
    Recorrer la lista y agregar un evento click que responda a las casillas del html
    */

    for (let i = 0; i < elCasillas.length; i++) {
        const element = elCasillas[i];
        element.addEventListener("click", function(e){
            let elTarget = e.target //Obtengo el elemento
            //console.log(elTarget)
            
            /* PASO 9 2/2 - Obtengo la posicon de los atributos del elemento clickeado */
            let i = elTarget.getAttribute("data-i")
            let j = elTarget.getAttribute("data-j")
            //console.log(i)
            //console.log(j)

            /* PASO 10 1/2 - Relaciono la accion del usuario con el modelo logioc. */
            add(i,j)
        })
    }
    </script>
</body>

</html>